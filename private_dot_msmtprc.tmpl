# Set default values for all following accounts.
defaults

# Use the mail submission port 587 instead of the SMTP port 25.
port {{ .msmtpPort }}

# Always use TLS.
tls on

# Account name
account {{ .msmtpAccount }}

# Host name of the SMTP server
host {{ .msmtpHost }}

# Envelope-from address
from {{ .emailFrom }}

# Authentication. Read password from 1Password (Mac) or gpg-encrypted file (Linux).
auth on
user {{ .msmtpLogin }}
{{ if eq .chezmoi.os "darwin" -}}
password {{ onepasswordRead .msmtpOnepasswordUrl }}
{{- end }}

# Password method 1: Add the password to the system keyring, and let msmtp get
# it automatically. To set the keyring password using Gnome's libsecret:
# $ secret-tool store --label=msmtp \
#   host smtp.freemail.example \
#   service smtp \
#   user joe.smith

# Password method 2: Store the password in an encrypted file, and tell msmtp
# which command to use to decrypt it. This is usually used with GnuPG, as in
# this example. Usually gpg-agent will ask once for the decryption password.
# passwordeval gpg --no-tty -q -d ~/.msmtp-password.txt.gpg

# Password method 3: Store the password directly in this file. Usually it is not
# a good idea to store passwords in plain text files. If you do it anyway, at
# least make sure that this file can only be read by yourself.
#password secret123

# Password method 4: Store the password in ~/.netrc. This method is probably not
# relevant anymore.

# Password method 5: Do not specify a password. Msmtp will then prompt you for
# it. This means you need to be able to type into a terminal when msmtp runs.

# Set a default account
account default : {{ .msmtpAccount }}
